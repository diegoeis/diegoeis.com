<!doctype html>
<html class="performance-web-rail">
<head>
  <title>Diego Eis  - Performance Web - Rail</title>
  <meta content="" name="description">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
  <link href='http://fonts.googleapis.com/css?family=Lato:400,300,700,900' rel='stylesheet' type='text/css'>
  <link href="assets/css/style.css" rel="stylesheet" />

  <script type="application/ld+json">
  {
    "@context":"http://schema.org",
    "@type":"BlogPosting",
    "@id":"http://diegoeis.com/performance-web-rail.html",
    "author" : {
      "@type" : "Person",
      "@id":"http://diegoeis.com",
      "name" : "Diego Eis"
    },
    "publisher": {
      "@type":"Person",
      "name":"Diego Eis"
    },
    "image":"https://pbs.twimg.com/profile_images/570009494805946368/dfEcOkau.jpeg",
    "datePublished": "2016-06-26 00:00:00 UTC",
    "dateModified": "2016-06-26 00:00:00 UTC",
    "headline":"Performance Web - Rail",
    "articleBody":""
  }

    </script>

  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66389393-1', 'auto');
    ga('send', 'pageview');

  </script>
</head>
<body>
<header class="de-header">
  <!-- <div class="de-menu">
    <span class="de-sandwich">☰ Menu</span>
  </div> -->
  <h1 class="de-logo"><a href="/"><strong>diegoeis</strong>.com</a></h1>
  <ul class="de-menu">
    <li><a href="sobre.html">Sobre</a></li>
  </ul>
  <a href="http://feeds.feedburner.com/diegoeisfeed" class="de-ico-rss">RSS</a>
  <a href="http://twitter.com/diegoeis" class="de-ico-twitter">@diegoeis</a>
</header>


<div class="de-wrapper">
  <article class="de-post">
      <header>
        <span class="de-tags">
          <strong>tags: </strong>
            <a href="/tags/notes.html">notes</a>
            <a href="/tags/performance.html">performance</a>
            <a href="/tags/front-end.html">front-end</a>
        </span>
        <time datetime="Jun 26, 2016">Jun 26, 2016</time>
        <a href="#disqus_thread" class="de-comment-count">Seja o primeiro a comentar</a>

        <h1 class="de-post-title">Performance Web - Rail</h1>

      </header>

      <p>Minhas anotações da palestra do sobre performance web do Sergio Lopes, feito no Encontro Locaweb 2016.</p>

<ul>
<li>Otimização de web se resume em mitificar css/js, comprimir HTML, gzip, concatenar CSS/JS, sprites, cache/expires, otimizar imagens, colocar scripts no fim da página e CSS no topo, trabalhar com assíncrono, lazy load, usar CDN, diminuir cookies, coisas desse tipo. Quem já usou alguma dessas práticas?</li>
<li>O que é performance exatamente? Qual é o tempo ideal para um site carregar? O que é carregar um site? Carregar o netflix é carregar o video inteiro do filme? Quem te fala que seu site está rápido?</li>
<li>Medir se o site que está rápido ou não, ou seja, pelo Onload, é uma péssima ideia.</li>
<li>SPA já quebra essa métrica, porque carrega uma vez e não dispara o onload de novo.</li>
<li>Nós temos vários tipos de performance:

<ol>
<li>Performance de carregamento. Quando clica e o browser faz alguma coisa.</li>
<li>Interação. O cara clica num botão e aí abre uma modal. isso é uma interação. É a interação dos usuários com os eventos da página.</li>
<li>Animação. Quanto tempo demora para a animação rodar. Dá umas travadas?</li>
<li>Memória. O browser da crash por causa da falta de memória.</li>
<li>Bateria. Sua aplicação mata a bateria do usuário porque fica consumindo os recursos da máquina (celular) o tempo inteiro?</li>
</ol></li>
<li>Quais são os limites da percepção de performance do usuário? A pesquisa chegou em 3 números: 100ms, 1s e 10s.</li>
<li>quando algo acontece algo em 100ms, nosso cérebro acha que aquilo é instantâneo. </li>
<li>Quando demora até 1s, seu cérebro já sabe que existe uma diferença, que há uma certa lentidão. O cérebro repara que algo aconteceu. Mas seu cérebro consegue dizer que ainda estamos numa mesma tarefa, embora exista um delay.</li>
<li>Depois de 10s, seu cérebro entende que acabou a tarefa. Não há uma ação e reação. Se o site demora pra carregar, ele abre uma aba do facebook para esperar e pronto, esqueceu seu site.</li>
<li>RAIL: Response Animation Idle Load, é um modelo de performance que quebra o modelo de performance em 4 pontos.</li>
<li>a ideia é quebrar cada uma das ações na sua página nessas quatro categorias.
## Load</li>
<li>Quando o cara dá enter na URL, dá para carregar instantaneamente? Difícil… Mas talvez dá carregar tudo em 1s. Dado aqueles limites de tempo psicológicos que vimos acima.</li>
<li>http://webpagetest.org</li>
<li>O que realmente importa nesses números que as páginas de métricas de performance trazem?</li>
<li>meça a sensação do usuário de que há alguma coisa na tela. First Minimum Paint. </li>
<li>Preste atenção no tempo de Start Render. Isso significa quando o browser começou a renderizar alguma coisa. Tente manter esse número perto do 1s.</li>
<li>O SpeedIndex é o número que vocÊ realmente quer diminuir. Ele mostra quando a página mostrada para o usuário (o topo, antes da dobra, antes do primeiro scroll), para de carregar coisas</li>
<li>Critical Rendering Path</li>
<li>tira o JS da primeira renderização. Fácil; basta chamar os JS no final da página. O grande bloqueador é o CSS. </li>
<li>Entregue tudo que esteja acima da dobra até um segundo. </li>
<li>Use um CSS inline acima da dobra. </li>
<li>&lt; 14Kb é um RTT (Road Trip) do servidor.</li>
<li>Ao invés do inline, dá para usar server push http/2
## Animation</li>
<li>O ideal do animation é que ele seja de 60fps</li>
<li>os monitores hoje redesenham a tela mais ou menos 60 vezes por segundo. Isso dá a sensação de que um vídeo é um video e não um monte de foto parada tentando se mover.</li>
<li>Pelo menos no Chrome e Safari, animações do CSS e etc, é feito na GPU. Isso quer dizer que o browser consegue encaixar os elementos certos na GPU, para que a placa gráfica consiga fazer seu trabalho direito</li>
<li>Quando você muda alguma coisa de CSS via JavaScript, o browser precisa recalcular a posição e os outros elementos que podem estar relacionados com esse elemento modificado</li>
<li>use a propriedade will-change para avisar o browser de que ele vai precisar animar algum elemento na GPU
## Responsive</li>
<li>Todas as ações do usuário precisa ser executado a 100ms.</li>
<li>O usuário precisa saber que sua interação foi executada. na verdade, o usuário só ter uma resposta de que sua ação foi entendida pelo sistema.</li>
<li>Mostra um loading maneiro, mostra qualquer feedback que faça o usuário entender que sua ação foi executada
## Idle</li>
<li>Você executa coisas na página, mas tem alguma hora que a animação já acabou de executar, sua página já foi carregada e o usuário não está executando nenhuma ação. Logo, você pod usar esse momento de ócio para disparar alguma coisa não essencial para as ações do usuário.</li>
<li>O browser é single thread, tudo rola numa thread só. tanto as ações do usuário, quanto seus scripts.</li>
<li>Quebre as tarefas em tardinhas: setTimeout, setImmediate, requestAnimationFrame, requestIdleCallback</li>
<li>Use WebWorkers para coisas pesadas em background</li>
<li>Performance é UX. O modelo de performance é focada nas ações e na experiência do usuário.</li>
<li>Response em 100ms</li>
<li>Animation em 16ms</li>
<li>Idle em 50 ms</li>
</ul>

<h2>- Load em 1s</h2>

      <hr class="de-hr">
        <br><span class="de-author">por Diego Eis</span>

      <hr class="de-hr">

      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES * * */
          var disqus_shortname = 'diegoeis';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>

  </article>



</div>

<script src="assets/js/scripts.js"></script>
<script id="dsq-count-scr" src="//diegoeis.disqus.com/count.js" async></script>

</body>
</html>

